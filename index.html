<!doctype html>
<html lang="pt-BR">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="Gerar QR-Code para conexão com Wifi">
      <meta name="author" content="Pedro Davi">
      <title>WIFIQRCON</title>
      <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/sign-in/">
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
      <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
      <script src="./jquery.qrcode.min.js"></script>
      <!-- Bootstrap core CSS -->
      <link href="./bootstrap.min.css" rel="stylesheet">
      <style>
         .bd-placeholder-img {
         font-size: 1.125rem;
         text-anchor: middle;
         -webkit-user-select: none;
         -moz-user-select: none;
         user-select: none;
         }
         @media (min-width: 768px) {
         .bd-placeholder-img-lg {
         font-size: 3.5rem;
         }
         }
      </style>
      <script>
         $(function() {
           $("input:submit, input:checkbox, button").button();
           $(".radio").buttonset();
           $('input').addClass("ui-corner-all");
           $('input:text, input:password')
             .button()
             .css({
               'font-size' : 'inherit',
               'color' : 'inherit',
               'text-align' : 'left',
               'outline' : 'none',
               'cursor' : 'text'
               })
             .focus(function() { $(this).select() })
             .mouseup(function(e) { e.preventDefault(); });
         
           $("#H").click(function() {
             $(this).button('option', 'label', $(this).is(':checked') ? '&nbsp;&nbsp;Rede Oculta' : '&nbsp;&nbsp;Rede Visível');
           });
         
           $("#PS").click(function() {
             $(this).button('option', 'label', $(this).is(':checked') ? '&nbsp;&nbsp;Senha Visível' : '&nbsp;&nbsp;Senha Oculta');
           });
         });
         
         function mecard_escape(str) {
           str = str.replace(/\\/g, "\\\\");
           str = str.replace(/\"/g, "\\\"");
           str = str.replace(/;/g, "\\;");
           str = str.replace(/:/g, "\\:");
           str = str.replace(/,/g, "\\,");
           return str;
         }
         
         function generateQR(divCanvas, divText, divKey) {
           var type = $("input:radio[name=T]:checked").val();
           var ssid = mecard_escape($("#S").val());
           var key = mecard_escape($("#P").val());
         
           var url = "WIFI:" +
             "T:" + type + ";" +
             "S:" + ssid + ";" +
             "P:" + key + ";" +
             ($("#H").is(":checked") ? "H:true;B:true;" : "") +
             ";";
         
           divCanvas.empty().qrcode(url);
           divText.html('' + $("#S").val() + ' (' + type + ')');
         
           if($('#PS').is(':checked')) {
             divKey.html('' + key);
           } else {
             divKey.html('&nbsp;');
           }
         }
         
         window.printQR = function(targetWin) {
           var printWin = window.open('', '_blank', '');
         
           printWin.document.write('<!doc'+'type html><ht'+'ml><he'+'ad><title>WiFi: ' + $("#S").val() + '</title></he'+'ad><bo'+'dy>');
           printWin.document.write('<div id="card">');
           printWin.document.write('<div id="cardcontent">');
           printWin.document.write('<div id="qrcode"></div>');
           printWin.document.write('<div id="qrtitle"></div>');
           printWin.document.write('<div id="qrkey"></div>');
           printWin.document.write('<div id="text">Leia o QR-Code para conectar ao WI-FI.</div>');
           printWin.document.write('<img src="wifi.png" id="wifilogo">');
           printWin.document.write('<div id="about">Generate your WiFi QR at<br/>https://wifiqrcon.github.io</div>');
           printWin.document.write('</div>');
           printWin.document.write('</div>');
           printWin.document.write('</bo'+'dy></ht'+'ml>');
         
           $("style[target='card']").each(function() {
             $(printWin.document.head).append($(this).clone())
           });
         
           generateQR($("#qrcode", printWin.document), $("#qrtitle", printWin.document), $("#qrkey", printWin.document));
           $(printWin.document).ready(function() {
             printWin.print();
           });
         }
      </script>
      <!-- Custom styles for this template -->
      <link href="./signin.css" rel="stylesheet">
   </head>
   
   <body class="text-center">
      <main class="form-signin">
         <img class="mb-4" src="./qr-code.svg" alt="" width="72" height="57">
         <h1 class="h3 mb-4 fw-normal">WIFIQRCON</h1>
         <input type="text" id="S" class="form-control" placeholder="Nome da Rede Wifi" required autofocus>
         <input type="password" id="P" class="form-control" placeholder="Senha da Rede Wifi" required>
         <input type="radio" id="type_wep" name="T" value="WEP"/><label for="type_wep">&nbsp;WEP</label>&nbsp;&nbsp;
         <input type="radio" id="type_wpa" name="T" value="WPA" checked="checked"/><label for="type_wpa">&nbsp;WPA/WPA2</label>&nbsp;&nbsp;
         <input type="radio" id="type_none" name="T" value="none"/><label for="type_none">&nbsp;Nenhuma</label>
         <div class="checkbox mb-4 mt-2">
            <label>
            <input type="checkbox" id="PS" value="true" /><label for="PS">&nbsp; Senha Visível</label>&nbsp;&nbsp;
            <input type="checkbox" id="H" value="true" /><label for="H">&nbsp; Rede Visível</label>
            </label>
         </div>
         <button class="w-100 btn btn-lg btn-primary" onClick="generateQR($('#qrcode'), $('#qrsub'), $('#qrkey'))">Gerar QR</button>
         <!--
            <br><br>
            <button class="w-100 btn btn-lg btn-primary" onClick="printQR()">Imprimir</button>-->
         <p class="mt-5 mb-3 text-muted">
         <div id="qrresult">
            <div id="qrcode"></div>
            <div id="qrsub">&nbsp;</div>
            <div id="qrkey">&nbsp;</div>
         </div>
         </p>
      </main>
      <script type="text/javascript">
         var _gaq = _gaq || [];
         _gaq.push(['_setAccount', 'UA-1177509-3']);
         _gaq.push(['_trackPageview']);
         
         (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
      </script>
   </body>
</html>